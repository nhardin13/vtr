{{ if (getenv "GOOGLE_ANALYTICS_API_KEY") }}
<!-- Google Analytics with environment variable -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ getenv "GOOGLE_ANALYTICS_API_KEY" }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ getenv "GOOGLE_ANALYTICS_API_KEY" }}');
</script>
{{ end }}

<!-- Bootstrap 5 JS (no jQuery dependency) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- Swiper Carousel JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- jQuery for map initialization -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- jQuery Cookie Plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- jQuery Waypoint Plugin for scroll animations -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- jQuery CounterUp Plugin for number animations -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

{{ if (getenv "GOOGLE_MAPS_API_KEY") }}
<script async src="https://maps.googleapis.com/maps/api/js?key={{ getenv "GOOGLE_MAPS_API_KEY" }}&v=quarterly"></script>
<script defer src="{{ "js/hpneo.gmaps.js" | relURL }}"></script>
<script defer src="{{ "js/gmaps.init.js" | relURL }}"></script>
{{ end }}

{{ if and .Site.Params.enablerecaptchaincontactform .Site.Params.googlerecaptchakey }}
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
{{ end }}

<script src="{{ "js/front.js" | relURL }}"></script>

<!-- Swiper initialization and scroll animations -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOMContentLoaded fired');
  
  // Debug: Check if Swiper is available
  if (typeof Swiper === 'undefined') {
    console.error('❌ Swiper library not loaded!');
    return;
  }
  console.log('✅ Swiper library loaded:', Swiper);
  
  // Check if element exists (only on pages with carousel)
  const swiperEl = document.querySelector('.homepage');
  if (!swiperEl) {
    // Element not found - this is normal on pages without a carousel
    return;
  }
  
  try {
    // Swiper Carousel
    const homeSwiper = new Swiper('.homepage', {
      loop: true,
      autoplay: {
        delay: 2000,
        disableOnInteraction: false,
      },
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      speed: 1000,
    });
    console.log('✅ Swiper initialized successfully:', homeSwiper);
  } catch (error) {
    console.error('❌ Swiper initialization error:', error);
  }

  // Scroll Animation for Cards
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry, index) {
      if (entry.isIntersecting) {
        setTimeout(function() {
          entry.target.classList.add('visible');
        }, index * 100);
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // Observe all elements with fade-in-up animation
  document.querySelectorAll('.box-simple, .bar').forEach(function(el) {
    if (!el.classList.contains('fade-in-up')) {
      el.classList.add('fade-in-up');
    }
    observer.observe(el);
  });

  // Form validation
  const forms = document.querySelectorAll('form[novalidate]');
  forms.forEach(function(form) {
    form.addEventListener('submit', function(event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  });
});
</script>

