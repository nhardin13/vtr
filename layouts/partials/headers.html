<meta charset="utf-8">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<meta name="viewport" content="width=device-width, initial-scale=1">
{{ $title_plain := .Title | markdownify | plainify }}
<title>{{ $title_plain }}</title>
<meta name="author" content="{{ .Param "author" }}" />
{{ $keywords := .Site.Params.defaultKeywords | default (slice "" | first 0) }}
{{ if isset .Params "tags" }}{{ range .Params.tags }}{{ $keywords = $keywords | append . }}{{ end }}{{ end }}
{{ if isset .Params "keywords" }}{{ range .Params.keywords }}{{ $keywords = $keywords | append . }}{{ end }}{{ end }}
{{ if gt (len $keywords) 0 }}
<meta name="keywords" content="{{ delimit (uniq $keywords) ", " }}">
{{ end }}
{{ $description_plain := default .Site.Params.defaultDescription .Description | markdownify | plainify }}
<meta name="description" content="{{ $description_plain }}">

{{ hugo.Generator }}

<!-- Fonts: Modern typography for professional + trustworthy feel -->
<link href='https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap' rel='stylesheet'>

<!-- Bootstrap 5 and Font Awesome CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Swiper Carousel CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- CSS animations -->
<link href="{{ "css/animate.css" | relURL }}" rel="stylesheet">

<!-- Custom stylesheet -->
<link href="{{ "css/custom.css" | relURL }}" rel="stylesheet">

<!-- Inline critical CSS removed after verifying full stylesheet deployment -->

<!-- Favicon and Apple touch icons -->
<link rel="shortcut icon" href="{{ "img/favicon.ico" | relURL }}" type="image/x-icon" />
<link rel="apple-touch-icon" href="{{ "img/apple-touch-icon.png" | relURL }}" />

<!-- RSS feed -->
<link rel="alternate" href="{{ "/index.xml" | absURL }}" type="application/rss+xml" title="{{ .Site.Title }}">

<!-- Facebook OpenGraph tags -->
{{ $is_blog := and (eq .Type "blog") (eq .Kind "page") }}
{{ $has_image :=  isset .Params "banner" }}
{{ $image := cond $has_image .Params.banner (.Site.Params.default_sharing_image | default "img/sharing-default.png") }}
{{ $is_valid_image := print "static/" $image | fileExists }}
<meta property="og:locale" content="{{ replace .Site.LanguageCode "-" "_" }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:title" content="{{ $title_plain | truncate 65 }}">
<meta property="og:type" content="{{ cond $is_blog "article" "website" }}">
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:description" content="{{ $description_plain | truncate 160 }}">
{{ if $is_valid_image }}
<meta property="og:image" content="{{ $image | absURL }}">
<meta property="og:image:type" content="image/{{ if eq (path.Ext $image) ".svg" }}svg+xml{{ else }}{{ trim (path.Ext $image) "." }}{{ end }}">
{{ $og_image_local := printf "/static/%s" $image }}
{{ with (imageConfig $og_image_local) }}
  <meta property="og:image:width" content="{{ .Width }}">
  <meta property="og:image:height" content="{{ .Height }}">
{{ end }}
{{ else }}
<meta property="og:image" content="{{ "img/sharing-default.png" | absURL }}">
<meta property="og:image:type" content="image/png">
{{ end }}
{{ with .Params.banner_alt }}<meta property="og:image:alt" content="{{ . | markdownify | plainify | truncate 125 }}">{{ end }}
{{ with .Lastmod }}<meta property="og:updated_time" content="{{ .Format "2006-01-02T15:04:05Z0700" }}">{{ end }}
{{ if $is_blog }}
  <meta property="article:publisher" content="https://www.facebook.com/valleytoprepair/">
  {{ with .Params.categories }}<meta property="article:section" content="{{ index . 0 }}">{{ end }}
  {{ range .Params.tags }}<meta property="article:tag" content="{{ . }}">{{ end }}
  {{ if gt .ExpiryDate .PublishDate }}<meta property="article:expiration_time" content="{{ .ExpiryDate.Format "2006-01-02T15:04:05Z0700" }}">{{ end }}
  {{ with .PublishDate }}<meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z0700" }}">{{ end }}
  {{ with .Lastmod }}<meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z0700" }}">{{ end }}
{{ end }}

<!-- Twitter Card meta tags -->
<meta name="twitter:card" content="summary{{ if (and $is_blog (and $has_image $is_valid_image)) }}_large_image{{ end }}">
<meta name="twitter:site" content="@valleytoprepair">
<meta name="twitter:title" content="{{ $title_plain | truncate 70 }}">
{{ if $is_valid_image }}
<meta name="twitter:image" content="{{ $image | absURL }}">
{{ $twitter_image_local := printf "/static/%s" $image }}
{{ with (imageConfig $twitter_image_local) }}
  <meta name="twitter:image:width" content="{{ .Width }}">
  <meta name="twitter:image:height" content="{{ .Height }}">
{{ end }}
{{ else }}
<meta name="twitter:image" content="{{ "img/sharing-default.png" | absURL }}">
{{ end }}
<meta name="twitter:description" content="{{ $description_plain | truncate 200 }}">
<meta name="twitter:creator" content="@valleytoprepair">

<!-- Canonical URL for SEO -->
<link rel="canonical" href="{{ .Permalink }}" />

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "{{ .Site.Title }}",
  "image": "{{ "img/vtr_logo.png" | absURL }}",
  "description": "{{ .Site.Params.about_us | plainify | htmlUnescape }}",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "3150 Clear Springs Rd",
    "addressLocality": "Spring Valley",
    "addressRegion": "OH",
    "postalCode": "45370",
    "addressCountry": "US"
  },
  "url": "{{ .Site.BaseURL }}",
  "telephone": "",
  "areaServed": {
    "@type": "State",
    "name": "Ohio"
  },
  "serviceType": [
    "Equipment Repair",
    "Small Engine Repair",
    "Lawn & Garden Equipment Repair",
    "Automotive Repair"
  ],
  "priceRange": "$$",
  "sameAs": [
    "https://www.facebook.com/valleytoprepair"
  ]
}
</script>

{{ if eq .Type "page" }}
<!-- Page-specific structured data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ $title_plain }}",
      "item": "{{ .Permalink }}"
    }
  ]
}
</script>

{{ with .File }}
{{ if eq .LogicalName "services.md" }}
<!-- Services page - Service schema for rich results -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Equipment Repair Services",
  "provider": {
    "@type": "LocalBusiness",
    "name": "Valley Top Repair",
    "url": "{{ $.Site.BaseURL }}",
    "telephone": "{{ $.Site.Params.phone | default "Contact for availability" }}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "3150 Clear Springs Rd",
      "addressLocality": "Spring Valley",
      "addressRegion": "OH",
      "postalCode": "45370",
      "addressCountry": "US"
    }
  },
  "areaServed": {
    "@type": "State",
    "name": "Ohio"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Equipment Repair Services",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Lawn Mower Repair"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Small Engine Repair"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Snow Equipment Repair"
        }
      },
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Yard Equipment Maintenance"
        }
      }
    ]
  }
}
</script>
{{ end }}
{{ end }}
{{ end }}

<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PMB3P9384Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-PMB3P9384Y', {
    'page_path': '{{ $.Permalink }}',
    'page_title': '{{ $title_plain }}',
    'anonymize_ip': true,
    'allow_google_signals': true,
    'allow_ad_personalization_signals': false
  });
  
  // Track custom events for service pages
  {{ if and $.File (eq $.File.LogicalName "services.md") }}
  gtag('event', 'view_item', {
    'items': [
      {'item_id': 'lawn_mowers', 'item_name': 'Lawn Mower Repair'},
      {'item_id': 'small_engines', 'item_name': 'Small Engine Repair'},
      {'item_id': 'snow_equipment', 'item_name': 'Snow Equipment Repair'}
    ]
  });
  {{ end }}
</script>

<!-- Heatmap Analytics: Hotjar Integration -->
{{ with (getenv "HOTJAR_ID") }}
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:{{ . }},hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-',{{ . }},'.js?sv=');
</script>
{{ end }}